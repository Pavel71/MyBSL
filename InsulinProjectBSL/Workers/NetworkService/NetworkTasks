


0. Есче есть такая идея подключить push когда новые данные поступают!

 // Завтра буду вешать потехонечку листнеры на дни и тогдалее посмотрю как это будет работать!
 
 
 // Итак работу с продуктами я отладил! пока что буду работать именно так!
 // Теперь нужно накинуть листнеры на все остальные realm данные!
 
 // Meal будет сделать не сложно
 
 // пуши на добавление с сервера тоже сделать не трудно
 
 // Что касается дня то тут надо подумать!
 
 
 // Так у меня сейчас 2 проблемы!
 
 1. Я могу запихнуть все в день! но тогда не удобнов вести чисто compObj
 2. или я вешаю листнер на Day и потом бегу в базу забирать новые Id! Но тут проблема с тем что у нас нет обновления предыдущего дня!
 
 // Add NewCompObj
    // Потом не понятно что к этому времени уже обновлися compObj и SugarRealm-может этого не произошло еще? а вот когда мы обновим  Day это точно произойдет!
    
    // Просто тогда какой смысл вести compobj и Sugar -
    // Добавления и удаления можно делать просто через обновление Дня! + таким же образом будет обновлятся и предыдущий день!
       + Легко будет вешать листнер
    
    // Тут просто проблема когда пойдет фетчинг - я должен буду разобрать все дни и запихать все по реалму!
    // или же можно реструктурировать и Реалм. Убрать отдельные базы данных - Хотя это уже не обязательно
    Но в качестве добавления и обновления - конечно же гораздо проще
    // Вообщем я даже не знаю как поступить!Наверно в сети стоит сделать день с включенными sugar и compObj
    
    // Короче план такой беру день как есть - пробегаюсь по всем ID собираю все объекты конвертирую их из реалма добавлю в арреи и сохраняю день! и так каждый раз у меня будет день с idшниками - я буду постоянно его собирать в модель и либо обновлять либо добавлять данные!
    
    // потом я вешаю листнер на день и все проблемы решенны! Как только идут изменения в дне я буду забирать его и распиливать по базам данных! просто собирать compObj конверитровать и добавлять в compObj или делать update! и не композить свой мозг! Это хороший план действий!
 
 
 // возможно проще будет повесить листнер на обновление дня - полуыать данные обращатся опять  к базе данных - хотя если бы они сразу были записанны в день было бы проще
 // получим id -нужно будет бежать в базу данных полуяать обхекты
 // и добавлять их вреалм! Если удаление то просто можно будет настроить удалнеи по отсутсвующим id кам
 // вообщем с днем не все так просто!
 + когда мы только логинимся мы сразу подгружаем данные с листенра
 

1. Нужно установить 3 листнера
   1 - На коллекцию с днями
   
   4 - Нужно вешать листнер на UserDefaults так как там генерируются также данные!
   
  1.1 Теперь самое тяжелое- Изменение в дне также исзменяются предыдущие обхекты! Это надо учитывать! Чтобы было все четкое надо забирать преддущий объект и текущий в случае обновление или добавления! или Вообщем это большая работа которую надо будет как следует тестировать!


4. Считывание данных пользователя из Firebase в Realm
  
  4.1 Кейс при котором пользователь залогинился на другом устройстве под своим аккаунтом!
      Мы запрашиваем все данные скачиваем их парсим и добавляем в Реалм! Который пуст
      Например если он не пуст то нам нужно все удалить из реалма и записать то что скачали
      
  4.2 Кейс 2 когда 2 июзера ведут 1 аккаунт! - Что можно сделать это навесить листнеров на все что есть в реалме!
      Или делигировать обновление по запросу пользователя путем нажатия на кнопку или сделать пулл рефреш
  4.3 Тогда нужно запускать алогритм сверки и проверять чего не хватает в реалме из fireBase- Возможно нужно использовать 1 метод загрузки в реалм а он сам обновит если таковой имеется!




