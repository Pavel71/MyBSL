



////////////////// Сделать экран обучения чтобы получить от пользователя первые настройки по сахару и по продуктам /////////////////



Сегодня хорошо поработал решил пару багво теперь логика работает так как мне нужно!
Прорабатываю дальше все остальные фичи!


////////////// Переделать Header Cell //////////////////////
  Топ Вью будет в виде графика с сахаром и рядом параметров таких как время еды запас инсулина - Будет красиво и удобно смотреть !



//////////// Задача получить предсказания на хороших обедах! /////////////



1. Работа с текущим обедом

  Сначала я работаю с текущим обедом обюновляю продукты поля считаю дозировку инсулина и доизровку сахара!
  
  // Не сделанно расчет коррекции сахара инсулином


2. Работа с предыдущим обедом!
  
  После нажатия сохранить
  2.1 Сетим сахар после еды - Готово
  2.2 Запрещаем пользоватся всеми полями в предидущем обеде - они все не активны - Готово
  
  2.3 Компенсация хорошая - Да
      2.3.0 - Вывести сообщение что все норм
      2.3.1 - Подсветить предыдущий обед Зелененьким! - Готово
  
  2.4 Если компенсация плохая то
      2.4.0 - Указать что обед нужно подправить
      2.4.1 - Добавить текстовые поля к продуктам(+ Хэдар)
      2.4.2 - Подсветить краснненьким обед и - Готово
      2.4.3 - Добавить функцию авторасчета коррекции - по формуле по массе углеводов
      2.4.4 - Если в предыдущем обеде сахар был высокий дать возможность подправить корректировку инсулина по сахару
      



2. Логика компенсации инсулина! Либо человек сам корректирует илбо авто расчет!

  Первое что приходит на ум это добавить до поля корректировка инсулина
  В модели же отображать поле правельная дозировка инсулина и соотвесвенно если сахар в норме то это поле равно дозировке
  Если Сахар не в норме то нужно это поле подкорректировать
  
  2.1 Для этого надо разделить поля - Фактический инсулин, Парвельный инсулин
      // Total Actual Insulin, Total GoodCompansation Insulin
      
  2.2 Написать алгоритм авторасчета коррекции от входящих данных по средней дозе инсулина на углеводы и
  2.3 Подсвечивать шприц зеленым если дозировка правельная и красная если мы ошиблись - Потом когда внесенна корректирующая доза сложить правельную и отобразить ее!
  2.4 Нужно прикинуть если пользователь не захочет корректировать предыдущий обед!
      Мы можем запретить ему двигатся дальше или расчитать сами автокорректировкой! Это будет меньшее из зол! не просто пока поле Success COmpansation не будет активированно мы не будем брать этот обед в рассчет, но все равно в качестве таргета надо брать поле правлеьная дозировка- а это поле будет заполнятся только после того как мы ввели сахар до обеда для нового обеда!
  
  


 Вообщем сейчас все работает как надо так как я буду брать только скомпенсированные обеды которые правлеьно были расчитаны Осталось только написать логиу правельной компенсации и регулеровки За это должна отвечать другая сущность
 когда обед будет приведен к статусу succesCompansation то он будет попадать в обучающую выьорку!
 
 // Теперь мне нужно поработать над логикой как скорректировать оишбочную коменсацию + можно настроить Веса для корректировки инсулина от сахара!

4. Сделать Экран обучения где на 4-х примерах по сахару и на 5 примерах по продуктам полуяить уже первые результаты и дальше продолжить работать!


1. Теперь нужно написать логику по сбору данных с реалма и преобразование их в ML Table
// Нужно написать ряд методв таких как сбор и преобразваоние данных
// после нажатия на кнопку получить предсказание
мы собираем тестовые данные
собираем все имеющиеся обеды
// преобразуем в МЛ Табле

обучаем модель
и делаем предсказание


2. Нужно Нужно сделать преобразователь из РЕАЛМ Объектов в ML  объекты
3.  Пока я считаю что все обеды идеальные и мы берем все данные в чистую
    Потом конечно нужна будет более точная выборка по праметрам особенно если шли коррекции



////////////////// Нужно переписать все обновления модели на обновления в Реалме! /////////////////







/////////////////////// Задача обработки плохих Обедов /////////////


0.0 Здесь нужно будет хорошо обдумать как и где расположить данные по текущему сахару время и коррекции! пока что это все очень не информативно выглядит!

1.0 Устанавливать время сахара после еды

1.01 Если я устанавливаю место укола по умолчанию то и валидатор должен это видеть

1.1 Нужно выравнить поля по одной линии чтобы корректировка инсулина и сколько всег осмотрелись красиво!

1.2 Сахар после еды будет виден только когда мы ввели Новый сахар перед едой



1.5 Нужно Обдумать как сделать корректировку данных за предыдущий обед елси  сахар сейчас вне нормы! - Тоесть нам нужно свойство этот обед компенсированн нормально или нет?
    Концептуально нужно оставить это поле без редактирования и ввести еще 1 коррекция продукта! Так будет гораздо яснее и точнее!
    Добавить еще текстфилдов!
    
1.6 Добавить возможность удалять Обед
1.7 При удаление продуктов из обеда отвратительная анимация!
